
// const xArray = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130];

const xArray = ["2023-02-01","2023-02-02","2023-02-03","2023-02-06","2023-02-07","2023-02-08","2023-02-09","2023-02-10","2023-02-13","2023-02-14","2023-02-15","2023-02-16","2023-02-17","2023-02-20","2023-02-21","2023-02-22","2023-02-23","2023-02-24","2023-02-27","2023-02-28","2023-03-01","2023-03-02","2023-03-03","2023-03-06","2023-03-07","2023-03-08","2023-03-09","2023-03-10","2023-03-13","2023-03-14","2023-03-15","2023-03-16","2023-03-17","2023-03-20","2023-03-21","2023-03-22","2023-03-23","2023-03-24","2023-03-27","2023-03-28","2023-03-29","2023-03-30","2023-03-31","2023-04-03","2023-04-04","2023-04-06","2023-04-07","2023-04-10","2023-04-11","2023-04-12","2023-04-13","2023-04-14","2023-04-17","2023-04-18","2023-04-19","2023-04-20","2023-04-21","2023-04-24","2023-04-25","2023-04-26","2023-04-27","2023-04-28","2023-05-04","2023-05-05","2023-05-08","2023-05-09","2023-05-10","2023-05-11","2023-05-12","2023-05-15","2023-05-16","2023-05-17","2023-05-18","2023-05-19","2023-05-22","2023-05-23","2023-05-24","2023-05-25","2023-05-26","2023-05-29","2023-05-30","2023-05-31","2023-06-01","2023-06-02","2023-06-05","2023-06-06","2023-06-07","2023-06-08","2023-06-09","2023-06-12","2023-06-13","2023-06-14","2023-06-15","2023-06-16","2023-06-19","2023-06-20","2023-06-21","2023-06-26","2023-06-27","2023-06-28","2023-06-29","2023-06-30","2023-07-03","2023-07-04","2023-07-05","2023-07-06","2023-07-07","2023-07-10","2023-07-11","2023-07-12","2023-07-13","2023-07-14","2023-07-17","2023-07-18","2023-07-19","2023-07-20","2023-07-21","2023-07-24","2023-07-25","2023-07-26","2023-07-27","2023-07-28","2023-07-31","2023-08-01","2023-08-02","2023-08-03","2023-08-04","2023-08-07","2023-08-08","2023-08-09"]


// const yArray =  [7.75,7.5,5.75,5.5,5.5,5.5,5.5,5.5,5.5,5.75,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.5,3.75,3.5,3.75,3.75,3.5,1.5,1.5,1.5,1.75,1.5,1.5,1.75,0.0,0.0,2.75,2.25,2.0,1.75,2.0,1.5,1.5,1.75,2.0,2.0,2.0,1.75,2.5,4.0,3.75,3.5,4.25,4.25,3.75,2.5,2.0,1.75,1.75,-0.25,-1.0,-1.75,-2.0,-2.25,-2.25,-2.5,-2.25,-2.5,-4.5,-2.0,-2.5,-2.25,-2.5,-2.5,-2.5,-2.5,-2.25,-2.25,-2.5,-2.5,-2.25,-4.5,-4.25,-4.0,-4.0,-2.25,-2.25,-4.5,-4.25,-4.25,-3.75,-2.25,-2.25,-2.5,-2.0,0.0,-2.25,-2.25,-3.0,-4.25,-4.5,-4.5,-4.5,-4.5,-4.5,-4.25,-4.5,-4.5,-4.5,-4.5,-4.5,-4.5,-3.75,-2.25,-4.5,-2.25,-2.5,-2.5,-2.5,-2.25,-2.25,-2.25,-2.5,-2.25,0.25,0.5,-0.25,0.25,0.0,0.0,-0.5,0.25,2.25]

const yArray = [25,26,25,18,17,17,17,17,17,17,18,9,9,9,9,9,9,9,9,9,10,9,10,10,9,1,1,1,2,1,1,2,-5,-5,6,4,3,2,3,1,1,2,3,3,3,2,5,11,10,9,12,12,10,5,3,2,2,-6,-9,-12,-13,-14,-14,-15,-14,-15,-23,-13,-15,-14,-15,-15,-15,-15,-14,-14,-15,-15,-14,-23,-22,-21,-21,-14,-14,-23,-22,-22,-20,-14,-14,-15,-13,-5,-14,-14,-17,-22,-23,-23,-23,-23,-23,-22,-23,-23,-23,-23,-23,-23,-20,-14,-23,-14,-15,-15,-15,-14,-14,-14,-15,-14,-4,-3,-6,-4,-5,-5,-7,-4];

// const textArray = ["大畜","需","大畜","节","损","损","损","损","损","损","节","贲","贲","贲","贲","贲","贲","贲","贲","贲","既济","贲","既济","既济","贲","颐","颐","颐","屯","颐","颐","屯","巽","巽","随","震","益","屯","益","颐","颐","屯","益","益","益","屯","噬嗑","家人","既济","贲","丰","丰","既济","噬嗑","益","屯","屯","井","讼","解","涣","坎","坎","蒙","坎","蒙","艮","涣","蒙","坎","蒙","蒙","蒙","蒙","坎","坎","蒙","蒙","坎","艮","蹇","渐","渐","坎","坎","艮","蹇","蹇","小过","坎","坎","蒙","涣","巽","坎","坎","遁","蹇","艮","艮","艮","艮","艮","蹇","艮","艮","艮","艮","艮","艮","小过","坎","艮","坎","蒙","蒙","蒙","坎","坎","坎","蒙","坎","恒","鼎","井","恒","巽","巽","蛊","恒"];

const data = [{
  name: "卦",
  mode:"markers+lines+text",
  type:"scatter",
  x: xArray,
  y: yArray,
  // ids: textArray,
  // text: textArray,
  hoverinfo: "all",
  textposition: 'top center',
  // orientation: 'v'
}];


const tickText =["^-48坤","-47剥","-46比","-45观","-44豫","-43晋","-42萃","-41否",
                 "^-38谦","-37艮","-36蹇","-35渐","-34小过","-33旅","-32咸","-31遁",
                 "^-28师","-27蒙","-26坎","-25涣","-24解","-23未济","-22困","-21讼",
                 "^-18升","-17蛊","-16井","-15巽","-14恒","-13鼎","-12大过","-11姤",
                 "〇",
                 "11复","12颐","13屯","14益","15震","16噬嗑","17随","^18无妄",
                 "21明夷","22贲","23既济","24家人","25丰","26离","27革","^28同人",
                 "31临","32损","33节","34中孚","35归妹","36睽","37兑","^38履",
                 "41泰","42大畜","43需","44小畜","45大壮","46大有","47夬","^48乾",
                ]

const layout = {
  xaxis: {title: "时", hoverformat: "%Y~%m~%d", tickformat: "%Y~%m~%d"},
  // yaxis: {range: [-32, 32], title: "卦象", tickmode: "linear", tick0: 0, dtick: 8 }
  yaxis: {title: "卦",
          range: [-32, 32],
          tickmode: "array",
          tickvals: [-32,-31,-30,-29,-28,-27,-26,-25,
                     -24,-23,-22,-21,-20,-19,-18,-17,
                     -16,-15,-14,-13,-12,-11,-10,-9,
                     -8,-7,-6,-5,-4,-3,-2,-1,
                     0,
                     1,2,3,4,5,6,7,8,
                     9,10,11,12,13,14,15,16,
                     17,18,19,20,21,22,23,24,
                     25,26,27,28,29,30,31,32],
          ticktext: tickText,
         },
  title: "量价卦势图（日均半年）",
  font: {size: 12},
  showlegend: true,
  // grid: { columns: 100 }
  // legend: { gbcolor: "red"}
  // showgrid: false,
  height: 1200,
  // width: 600
  // calendar: "chinese"
};

var config = {
  // locale: 'zh-CN',
  scrollZoom: true,
  responsive: true,
  editable: true
};

Plotly.newPlot("myPlot", data, layout, config);







// d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv", function(err, rows){
//   function unpack(rows, key) {
//   return rows.map(function(row) { return row[key]; });
// }

// var trace1 = {
//   type: "scatter",
//   mode: "lines",
//   name: 'AAPL High',
//   x: unpack(rows, 'Date'),
//   y: unpack(rows, 'AAPL.High'),
//   line: {color: '#17BECF'}
// }
// var trace2 = {
//   type: "scatter",
//   mode: "lines",
//   name: 'AAPL Low',
//   x: unpack(rows, 'Date'),
//   y: unpack(rows, 'AAPL.Low'),
//   line: {color: '#7F7F7F'}
// }
// var data = [trace1,trace2];
// var layout = {
//   title: 'Basic Time Series',

// };

//   Plotly.newPlot('myPlot', data, layout, {responsive: true});
// })